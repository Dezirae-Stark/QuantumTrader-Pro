# =====================================================================
# QuantumTrader-Pro Environment Configuration
# =====================================================================
# IMPORTANT: Copy this file to .env and configure with your values
# Never commit .env to version control - it contains sensitive data!
#
# Quick Setup:
#   1. cp .env.example .env
#   2. Edit .env with your broker credentials
#   3. Set ENV to your environment (production/staging/demo/development)
#   4. Configure broker provider and API keys
#   5. Test with: python ml/predictor_daemon_v2.py --config configs/config.yaml
#
# Documentation: See docs/ENVIRONMENT_SETUP.md for detailed guide
# =====================================================================

# =====================================================================
# ENVIRONMENT SETTINGS
# =====================================================================

# Application environment
# Options: production | staging | demo | development
# - production: Real trading, synthetic data disabled, strict validation
# - staging: Pre-production testing, similar to production
# - demo: Demo mode, can use synthetic data for testing
# - development: Local development, relaxed validation
ENV=production

# Enable debug mode (verbose logging, stack traces)
# WARNING: Only use in development - exposes sensitive information!
DEBUG=false

# Application version (auto-set from git tag in CI/CD)
APP_VERSION=2.1.0

# =====================================================================
# DATA SOURCE CONFIGURATION
# =====================================================================

# Use synthetic data for testing (CRITICAL: must be false in production!)
# The system will automatically enforce false in production mode
USE_SYNTHETIC_DATA=false

# Allow cached data when broker is unavailable
ALLOW_CACHED_DATA=false
CACHED_DATA_MAX_AGE_SECONDS=300

# Fail immediately on data errors vs. trying fallbacks
FAIL_ON_DATA_ERROR=true

# Warn when data is older than this threshold
WARN_ON_STALE_DATA=true
STALE_DATA_THRESHOLD_SECONDS=60

# =====================================================================
# BROKER CONFIGURATION
# =====================================================================

# Broker provider selection
# Options: mt4 | mt5 | oanda | binance | generic
# - mt4: MetaTrader 4 via bridge server
# - mt5: MetaTrader 5 via bridge server
# - oanda: Oanda REST API
# - binance: Binance exchange API
# - generic: Generic REST API (any broker)
BROKER_PROVIDER=mt4

# Broker API connection details
BROKER_API_URL=http://localhost:8080
BROKER_API_KEY=
BROKER_API_SECRET=
BROKER_SERVER=
BROKER_ACCOUNT=

# Broker connection settings
BROKER_TIMEOUT_SECONDS=30
BROKER_MAX_RETRIES=3
BROKER_RETRY_DELAY_SECONDS=5

# Data fetching settings
BROKER_MAX_CANDLES=500
BROKER_TICK_SUBSCRIPTION=true

# =====================================================================
# MT4/MT5 BRIDGE SERVER (if using MT4/MT5)
# =====================================================================

# Bridge server connection
MT4_BRIDGE_URL=http://localhost:8080
MT4_BRIDGE_DATA_DIR=bridge/data

# WebSocket settings
MT4_WS_ENABLED=true
MT4_WS_URL=ws://localhost:8080/ws

# =====================================================================
# API SERVER CONFIGURATION
# =====================================================================

# Server settings
API_HOST=0.0.0.0
API_PORT=8080
NODE_ENV=production

# CORS configuration
CORS_ENABLED=true
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080,http://localhost:5000

# =====================================================================
# AUTHENTICATION & SECURITY
# =====================================================================

# Enable authentication (recommended for production)
REQUIRE_AUTHENTICATION=true

# JWT token configuration
# SECURITY: Generate strong secret with: openssl rand -hex 32
JWT_SECRET=your_super_secret_jwt_key_change_this_in_production_use_openssl_rand
JWT_EXPIRES_HOURS=24
JWT_ALGORITHM=HS256

# API keys for external access (optional)
API_KEY=
API_SECRET=

# Session configuration
SESSION_SECRET=your_session_secret_change_this
SESSION_MAX_AGE_HOURS=24

# =====================================================================
# RATE LIMITING
# =====================================================================

# General API rate limit (requests per minute)
RATE_LIMIT_PER_MINUTE=100

# Authentication endpoints rate limit
AUTH_RATE_LIMIT_PER_MINUTE=5

# Trading endpoints rate limit
TRADE_RATE_LIMIT_PER_MINUTE=30

# Rate limit window (milliseconds)
RATE_LIMIT_WINDOW_MS=60000

# =====================================================================
# VALIDATION & SCHEMA
# =====================================================================

# Enable strict JSON schema validation
STRICT_SCHEMA_VALIDATION=true

# Log validation errors
LOG_VALIDATION_ERRORS=true

# Return validation errors to client (disable in production for security)
RETURN_VALIDATION_ERRORS=false

# =====================================================================
# MACHINE LEARNING ENGINE
# =====================================================================

# ML model configuration
ML_MODEL_VERSION=2.1.0
ML_MODEL_DIR=./ml/models
ML_CACHE_DIR=./ml/cache

# Prediction parameters
ML_CONFIDENCE_THRESHOLD=75.0
QUANTUM_CONFIDENCE_THRESHOLD=70.0
ML_PREDICTION_WINDOW=8

# Prediction validation
MAX_PRICE_MOVE_PCT=10.0
MIN_PREDICTION_CONFIDENCE=50.0

# Feature engineering
ENABLE_TREND_INDICATORS=true
ENABLE_MOMENTUM_INDICATORS=true
ENABLE_VOLATILITY_INDICATORS=true
ENABLE_VOLUME_INDICATORS=true
ENABLE_QUANTUM_FEATURES=true
ENABLE_CHAOS_FEATURES=true

# =====================================================================
# TRADING PARAMETERS
# =====================================================================

# Risk management
MAX_RISK_PER_TRADE_PCT=2.0
MAX_DAILY_RISK_PCT=5.0
MAX_OPEN_POSITIONS=10
MAX_POSITIONS_PER_PAIR=2

# Order execution
MAX_SPREAD_PIPS=3.0
MIN_STOP_LOSS_PIPS=20.0
SLIPPAGE_TOLERANCE_PIPS=2.0

# Signal filtering
ENABLE_QUANTUM_SIGNALS=true
ENABLE_ML_SIGNALS=true
ENABLE_CANTILEVER_HEDGE=true

# Position management
USE_TRAILING_STOP=true
TRAILING_STOP_DISTANCE_PIPS=50.0
BREAK_EVEN_PIPS=30.0

# =====================================================================
# NOTIFICATION SERVICES
# =====================================================================

# Telegram notifications
TELEGRAM_ENABLED=false
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=
TELEGRAM_NOTIFICATION_LEVEL=important
# Options: all | important | critical

# Discord webhooks
DISCORD_ENABLED=false
DISCORD_WEBHOOK_URL=
DISCORD_USERNAME=QuantumTrader Pro
DISCORD_NOTIFICATION_LEVEL=important

# Email notifications (SMTP)
EMAIL_ENABLED=false
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=true
SMTP_USERNAME=
SMTP_PASSWORD=
EMAIL_FROM=
EMAIL_TO=
EMAIL_NOTIFICATION_LEVEL=critical

# Slack notifications
SLACK_ENABLED=false
SLACK_WEBHOOK_URL=
SLACK_CHANNEL=#trading-alerts
SLACK_NOTIFICATION_LEVEL=important

# =====================================================================
# LOGGING CONFIGURATION
# =====================================================================

# Log level
# Options: DEBUG | INFO | WARNING | ERROR | CRITICAL
LOG_LEVEL=INFO

# Log format
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# File logging
LOG_TO_FILE=true
LOG_FILE=./logs/quantumtrader.log
LOG_MAX_FILE_SIZE_MB=100
LOG_BACKUP_COUNT=10

# Console logging
LOG_TO_CONSOLE=true

# Component-specific log levels (optional overrides)
LOG_LEVEL_BACKEND=INFO
LOG_LEVEL_ML=INFO
LOG_LEVEL_BROKERS=INFO
LOG_LEVEL_BRIDGE=INFO

# =====================================================================
# MONITORING & METRICS
# =====================================================================

# Enable performance metrics
ENABLE_METRICS=true
METRICS_PORT=9090

# Health check interval (seconds)
HEALTH_CHECK_INTERVAL_SECONDS=60

# Performance tracking
PERFORMANCE_TRACKING=true

# Prometheus metrics (if using Prometheus)
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# =====================================================================
# DATABASE CONFIGURATION (if using database)
# =====================================================================

# Database type
# Options: sqlite | postgresql | mysql
DATABASE_TYPE=sqlite

# SQLite (for simple deployments)
SQLITE_DB_PATH=./data/quantumtrader.db

# PostgreSQL (for production)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=quantumtrader
POSTGRES_PASSWORD=
POSTGRES_DB=quantumtrader
POSTGRES_SSL_MODE=require

# MySQL (alternative)
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=quantumtrader
MYSQL_PASSWORD=
MYSQL_DB=quantumtrader

# Connection pool settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# =====================================================================
# REDIS CONFIGURATION (for caching/sessions)
# =====================================================================

# Redis connection
REDIS_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_SSL=false

# Cache TTL (seconds)
REDIS_CACHE_TTL=300

# =====================================================================
# EXTERNAL SERVICES
# =====================================================================

# Codecov (for test coverage)
CODECOV_TOKEN=

# Sentry (for error tracking)
SENTRY_ENABLED=false
SENTRY_DSN=
SENTRY_ENVIRONMENT=production

# Analytics
ANALYTICS_ENABLED=false
ANALYTICS_ID=

# =====================================================================
# DEVELOPMENT SETTINGS (only used when ENV=development)
# =====================================================================

# Hot reload
DEV_HOT_RELOAD=true

# Mock broker (for testing without real broker)
DEV_MOCK_BROKER=true

# Synthetic data (for testing)
DEV_SYNTHETIC_DATA=true

# Skip validation (for faster development)
DEV_SKIP_VALIDATION=false

# Verbose logging
DEV_VERBOSE_LOGGING=true

# =====================================================================
# TESTING SETTINGS (only used during tests)
# =====================================================================

# Test database
TEST_DATABASE_URL=sqlite:///./test.db

# Test API endpoint
TEST_API_URL=http://localhost:8888

# Mock external services
TEST_MOCK_BROKER=true
TEST_MOCK_NOTIFICATIONS=true

# =====================================================================
# DEMO/STAGING SPECIFIC (only used when ENV=demo or ENV=staging)
# =====================================================================

# Demo broker credentials (LHFX example)
DEMO_BROKER_SERVER=LHFXDemo-Server
DEMO_BROKER_ACCOUNT=194302
DEMO_BROKER_PASSWORD=

# Staging API
STAGING_API_URL=https://staging-api.yourcompany.com

# =====================================================================
# OPTIONAL INTEGRATIONS
# =====================================================================

# TradingView webhooks
TRADINGVIEW_WEBHOOK_SECRET=

# MetaTrader Market integration
MT_MARKET_PRODUCT_ID=

# Cloud storage (for backups)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_S3_BUCKET=
AWS_REGION=us-east-1

# Google Cloud
GCP_PROJECT_ID=
GCP_BUCKET=

# =====================================================================
# FEATURE FLAGS
# =====================================================================

# Enable/disable features without code changes
FEATURE_QUANTUM_PREDICTIONS=true
FEATURE_ML_PREDICTIONS=true
FEATURE_CHAOS_ANALYSIS=true
FEATURE_CANTILEVER_HEDGE=true
FEATURE_AUTO_TRADING=true
FEATURE_BACKTESTING=true
FEATURE_TELEGRAM_BOT=true
FEATURE_WEB_DASHBOARD=true

# =====================================================================
# SECURITY NOTES
# =====================================================================
#
# IMPORTANT SECURITY PRACTICES:
#
# 1. NEVER commit .env files to version control
#    - Add .env to .gitignore (already done)
#    - Use .env.example as template only
#
# 2. Generate strong secrets:
#    - JWT_SECRET: openssl rand -hex 32
#    - SESSION_SECRET: openssl rand -hex 32
#    - API keys: Use provider's generation tools
#
# 3. Use GitHub Secrets for CI/CD:
#    - Store all secrets in GitHub repository settings
#    - Reference with ${{ secrets.SECRET_NAME }}
#    - See docs/GITHUB_SECRETS.md for setup guide
#
# 4. Rotate credentials regularly:
#    - API keys: Every 90 days
#    - JWT secrets: Every 6 months
#    - Database passwords: Every 90 days
#
# 5. Use environment-specific .env files:
#    - .env.production (never commit!)
#    - .env.staging (never commit!)
#    - .env.development (local only)
#
# 6. Validate on startup:
#    - Check required variables are set
#    - Verify secret strength
#    - Confirm production-safe configuration
#
# For detailed security guide, see:
# - docs/SECURITY.md
# - docs/ENVIRONMENT_SETUP.md
# - docs/GITHUB_SECRETS.md
#
# =====================================================================
